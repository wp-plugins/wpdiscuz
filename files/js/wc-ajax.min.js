jQuery(document).ready(function(f){var D=f("#wc_home_url").val();var t=f("#wc_plugin_dir_url").val();var v;var l;var k;var r;var C;var j;var g;var y;var h;var m;var z;var d;var o=parseInt(f("#wc_comment_list_update_type").val());var e=parseInt(f("#wc_comment_list_update_timer").val());var i;var H;f(".wc_comment").autoGrow();f(document).delegate("#wc_openModalFormAction","click",function(){f("#wc_openModalFormAction").css("opacity","0");f("#wc_openModalFormAction").css("pointer-events","none")});f(document).delegate("#wc_openModalFormAction .close","click",function(){f("#wc_openModalFormAction").css("opacity","0");f("#wc_openModalFormAction").css("pointer-events","none")});d="<img width='64' height='64' src='"+D+"/"+t+"/files/img/loader/ajax-loader-200x200.gif' />";m=f("#wc_comments_offset");m.val("1");f(document).delegate(".wc_comment","focus",function(){var I=a(f(this));f("#wc-form-footer-"+I).slideDown(700)});f(document).delegate(".wc-reply-link","click",function(){var I=a(f(this));if(f(".wc_social_plugin_wrapper .wp-social-login-provider-list").length&&!(f("#wc-secondary-forms-social-content-"+I+" .wp-social-login-provider-list").length)){f(".wc_social_plugin_wrapper .wp-social-login-provider-list").clone().prependTo("#wc-secondary-forms-social-content-"+I)}else{if(f(".wc_social_plugin_wrapper .the_champ_login_container").length&&!(f("#wc-secondary-forms-social-content-"+I+" .the_champ_login_container").length)){f(".wc_social_plugin_wrapper .the_champ_login_container").clone().prependTo("#wc-secondary-forms-social-content-"+I)}else{if(f(".wc_social_plugin_wrapper .social_connect_form").length&&!(f("#wc-secondary-forms-social-content-"+I+" .social_connect_form").length)){f(".wc_social_plugin_wrapper .social_connect_form").clone().prependTo("#wc-secondary-forms-social-content-"+I)}else{if(f(".wc_social_plugin_wrapper .oneall_social_login_providers").length&&!(f("#wc-secondary-forms-social-content-"+I+" .oneall_social_login_providers").length)){f(".wc_social_plugin_wrapper .oneall_social_login .oneall_social_login_providers").clone().prependTo("#wc-secondary-forms-social-content-"+I)}}}}f("#wc-secondary-forms-wrapper-"+I).slideToggle(700)});f(document).delegate(".wc-share-link","click",function(){var I=a(f(this));f("#share_buttons_box-"+I).slideToggle(1000)});f(document).delegate(".wc_captcha_refresh_img","click",function(){var K=a(f(this));var I=f("#wc_comment_post_ID-"+K).val();var J=f("#wc_comment_parent-"+K).val();f("#wc_captcha_img-"+K).attr("src",D+"/"+t+"/captcha/captcha.php?comm_id="+I+"-"+J+"&r="+Math.random())});f(document).delegate(".wc_comm_submit","click",function(){h=f(this).attr("id");var L=h.substring(h.lastIndexOf("-")+1);v=f("#wc_name-"+L).val();l=f("#wc_email-"+L).val();r=(f("#wc_website-"+L).length)?f("#wc_website-"+L).val():"";k=f("textarea#wc_comment-"+L).val();C=f("#wc_captcha-"+L).val();j=f("#wc_comment_post_ID-"+L).val();g=f("#wc_comment_parent-"+L).val();y=f("#wc_comm_form-"+L);var M=f("input[name='wc_comment_reply_notification-"+L+"']:checked").length?f("input[name='wc_comment_reply_notification-"+L+"']:checked").val():"";var K="";if(c(h,j)){K=1}else{K=x(f(this).parents(".wc-comment"))}var I="";if(M.length&&M!="wc_notification_none"){if(M=="wc_notification_new_reply"){I="reply"}if(M=="wc_notification_all_new_reply"){I="all_comment"}if(M=="wc_notification_new_comment"){I="post"}}var J=true;if(!wpdiscuzValidator.checkAll(y)){J=false;f("#wc_captcha-"+L).val("");f("#wc_captcha_img-"+L).attr("src",D+"/"+t+"/captcha/captcha.php?comm_id="+j+"-"+g+"&r="+Math.random())}else{f("#wc_openModalFormAction .close").css("display","none");f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");f("#wc_openModalFormAction > #wc_response_info").html(d)}if(J){f.ajax({type:"POST",url:wc_ajax_obj.url,data:{name:v,email:l,website:r,comment:k,captcha:C,comment_post_ID:j,comment_parent:g,comment_depth:K,notification_type:I,action:"wc_comms_via_ajax"}}).done(function(N){f("#wc_captcha_img-"+L).attr("src",D+"/"+t+"/captcha/captcha.php?comm_id="+j+"-"+g+"&r="+Math.random());try{var Q=f.parseJSON(N);z=parseInt(Q.wc_new_comment_id);if(Q.code===-1){var O="<a href='#close' title='Close' class='close'>&nbsp;</a>";f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");f("#wc_openModalFormAction .close").css("display","block");f("#wc_openModalFormAction > #wc_response_info").html(O+Q.message)}else{if(Q.code===-2){var O="<a href='#close' title='Close' class='close'>&nbsp;</a>";f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");f("#wc_openModalFormAction .close").css("display","block");f("#wc_openModalFormAction > #wc_response_info").html(O+Q.message);f("#wc_comment-"+L).val("");f(".wc_comm_form textarea").css("height","46px");if(h==="wc_comm-"+j+"_0"){f("#wc-form-footer-"+L).slideToggle(700)}else{f("#wc-secondary-forms-wrapper-"+L).slideToggle(700)}f.cookie("wc_author_name",v);f.cookie("wc_author_email",l);f.cookie("wc_author_website",r)}else{i=Q.wc_all_comments_count_new;f("#wc_comment-"+L).val("");f(".wc_comm_form textarea").css("height","46px");if(h==="wc_comm-"+j+"_0"){f(".wc-thread-wrapper").prepend(Q.message);f("#wc-form-footer-"+L).slideToggle(700);f("#wc_curr_user_comment_count").val(parseInt(f("#wc_curr_user_comment_count").val())+1)}else{f("#wc-secondary-forms-wrapper-"+L).slideToggle(700);if(Q.is_in_same_container==1){f("#wc-secondary-forms-wrapper-"+L).after(Q.message)}else{f("#wc-secondary-forms-wrapper-"+L).after(Q.message.replace("wc-reply","wc-reply wc-no-left-margin"))}}f("#wc_openModalFormAction").css("opacity","0");f("#wc_openModalFormAction").css("pointer-events","none");f.cookie("wc_author_name",v);f.cookie("wc_author_email",l);f.cookie("wc_author_website",r);f("#wpcomm .wc_name").val(v);f("#wpcomm .wc_email").val(l);f("#wpcomm .wc_website").val(r);if(f(".wc_header_text_count").length){f(".wc_header_text_count").val(parseInt(f(".wc_header_text_count").val())+1)}f.cookie("wc_all_comments_count_new",i)}}f("#wc_captcha-"+L).val("");f(".wc_tooltipster").tooltipster({offsetY:2});f(".wc_comm_form input").css("box-shadow","0 0 4px -2px #d4d0ba");f(".wc_comm_form textarea").css("box-shadow","0 0 4px -2px #d4d0ba");b(j,z,l,I);if(Q.code==1||Q.code==-2){f.ajax({type:"POST",url:wc_ajax_obj.url,data:{wc_new_comment_id:z,action:"wpdiscuz_comment_redirect"}}).done(function(S){try{var R=f.parseJSON(S);if(R.code==1){setTimeout(function(){window.location.href=R.redirect_to},5000)}}catch(T){}})}}catch(P){f("#wc_captcha-"+L).val("");f(".wc_tooltipster").tooltipster({offsetY:2});f(".wc_comm_form input").css("box-shadow","0 0 4px -2px #d4d0ba");f(".wc_comm_form textarea").css("box-shadow","0 0 4px -2px #d4d0ba");var O="<a href='#close' title='Close' class='close'>&nbsp;</a>";f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");f("#wc_openModalFormAction .close").css("display","block");if(N.contains("<")&&N.contains(">")){f("#wc_openModalFormAction > #wc_response_info").html(O+P)}else{f("#wc_openModalFormAction > #wc_response_info").html(O+N)}}})}else{return false}});f(document).delegate(".wc_vote","click",function(){var K=a(f(this));var I=F(K);var J;f("#wc_openModalFormAction > #wc_response_info").html(d);f("#wc_openModalFormAction .close").css("display","block");f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");if(f(this).hasClass("wc-up")){J=1}else{J=-1}f.ajax({dateType:"json",type:"POST",url:wc_ajax_obj.url,data:{comment_ID:I,vote_type:J,action:"wc_vote_via_ajax"}}).done(function(L){var N=f.parseJSON(L);if(N.code!==-1){f("#vote-count-"+K).text(parseInt(f("#vote-count-"+K).text())+J);f("#wc_openModalFormAction").css("opacity","0");f("#wc_openModalFormAction").css("pointer-events","none")}else{var M="<a href='#close' title='Close' class='close'>&nbsp;</a>";f("#wc_response_info").html(M+N.message);f("#wc_openModalFormAction .close").css("display","block")}})});f(document).delegate(".wc-load-more-submit","click",function(){f("#wc_openModalFormAction > #wc_response_info").html(d);f("#wc_openModalFormAction .close").css("display","none");f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");var L=m.val();var M=E(f(this).attr("id"));var N=parseInt(f("#wc_parent_comments_count").val());var J=parseInt(f("#wc_parent_per_page").val());var K=(f("#wc_last_comment_id_before_update").val())?f("#wc_last_comment_id_before_update").val():0;var I=f("#wc_curr_user_comment_count").val();L=parseInt(L);L++;f.ajax({type:"POST",url:wc_ajax_obj.url,data:{comments_offset:L,wc_curr_user_comment_count:I,wc_post_id:M,wc_last_comment_id:K,action:"wc_load_more_comments"}}).done(function(O){var P=f.parseJSON(O);m.val(L);if(N<=(L*J)){f(".wc-load-more-submit-wrap").remove()}f(".wc-thread-wrapper").html(P.message);f("#wc_last_comment_id").val(P.wc_last_comment_id);f("#hidden_new_comment_count").val(P.hidden_new_comment_count);f("#wc_openModalFormAction").css("opacity","0");f("#wc_openModalFormAction").css("pointer-events","none");f(".wc_tooltipster").tooltipster({offsetY:2});s()})});f(document).delegate(".wc_new_comment","click",function(){h=f(".wc_main_comm_form input.wc_comm_submit").attr("id");var M=h.substring(h.lastIndexOf("-")+1);j=E(M);var K=f("#wc_last_new_comment_id").val();l=f.cookie("wc_author_email");var J=f("#wc_curr_user_comment_count").val();var L=m.val();var I="";f(".wc-thread-wrapper .wc-comment").each(function(){var N=f(this).attr("id");var O=N.substring(N.lastIndexOf("-")+1);I+=F(O)+","});f.ajax({type:"POST",url:wc_ajax_obj.url,data:{wc_requested_comments_type:1,wc_last_comment_id:K,wc_post_id:j,wc_author_email:l,wc_comments_offset:L,wc_curr_user_comment_count:J,wc_visible_comments_ids:I,action:"wc_list_new_comments"}}).done(function(N){try{var P=f.parseJSON(N);if(P.code!=0){f(".wc-thread-wrapper").html(P.message);f("#wc_last_new_comment_id").val(P.wc_last_comment_id);f(".wc_new_comment").hide();f(document).delegate(".wc_new_loaded_comment","mouseenter",function(){if(f(this).parent(".wc-comment").hasClass("wc-reply")){f(this,".wc-comment-right").animate({backgroundColor:"#f8f8f8"},1500)}else{f(this,".wc-comment-right").animate({backgroundColor:"#fefefe"},1500)}f(this,".wc-comment-right").removeClass("wc_new_loaded_comment")})}}catch(O){console.log(O)}})});f(document).delegate(".wc_new_reply","click",function(){h=f(".wc_main_comm_form input.wc_comm_submit").attr("id");var M=h.substring(h.lastIndexOf("-")+1);j=E(M);var K=f("#wc_last_new_reply_id").val();l=f.cookie("wc_author_email");var J=f("#wc_curr_user_comment_count").val();var L=m.val();var I="";f(".wc-thread-wrapper .wc-comment").each(function(){var N=f(this).attr("id");var O=N.substring(N.lastIndexOf("-")+1);I+=F(O)+","});f.ajax({type:"POST",url:wc_ajax_obj.url,data:{wc_requested_comments_type:2,wc_last_comment_id:K,wc_comments_offset:L,wc_curr_user_comment_count:J,wc_post_id:j,wc_author_email:l,wc_visible_comments_ids:I,action:"wc_list_new_comments"}}).done(function(N){try{var P=f.parseJSON(N);if(P.code!=0){f(".wc-thread-wrapper").html(P.message);f("#wc_last_new_reply_id").val(P.wc_last_comment_id);f(".wc_new_reply").hide()}}catch(O){console.log(O)}})});function a(J){var I=J.attr("id");var K=I.substring(I.lastIndexOf("-")+1);return K}function E(J){var I=J.substring(J.lastIndexOf("-")+1);I=I.substring(0,I.lastIndexOf("_"));return I}function F(J){var I=J.substring(J.indexOf("_")+1);return I}function x(K){var J=K.attr("class");var I=J.split(" ");var L="";f.each(I,function(M,N){if("wc_comment_level"===G(N,false)){L=G(N,true)}});return parseInt(L)+1}function G(I,J){var K="";if(J){K=I.substring(I.indexOf("-")+1)}else{K=I.substring(0,I.indexOf("-"))}return K}function c(J,I){return J==="wc_comm-"+I+"_0"}function q(){var I=f.cookie("wc_all_comments_count_new")?false:true;if(o==1){if(!u(I)){p()}}else{if(o==2){if(!u(I)){B()}}}}function p(){j=f("#wpdiscuz_current_post_id").val();var O=f("#wc_last_comment_id_before_update").val();var K=f("#wc_last_new_comment_id").val();var L=f("#wc_last_new_reply_id").val();var M=f("#wc_comments_offset").length?f("#wc_comments_offset").val():1;var N=f.cookie("wc_all_comments_count_old");var I=f("#wc_curr_user_comment_count").val();var J=f.cookie("wc_author_email");f.ajax({type:"POST",url:wc_ajax_obj.url,data:{wc_author_email:J,wc_curr_user_comment_count:I,wc_last_comment_id:O,wc_last_new_comment_id:K,wc_last_new_reply_id:L,wc_all_comments_count_old:N,wc_comments_offset:M,wc_comment_list_update_type:o,wc_post_id:j,action:"wc_live_update"}}).done(function(P){n(P)})}function B(){h=f(".wc_main_comm_form input.wc_comm_submit").attr("id");var N=h.substring(h.lastIndexOf("-")+1);j=E(N);g=F(N);var L=f("#wc_comments_offset").length?f("#wc_comments_offset").val():1;var I=f("#wc_curr_user_comment_count").val();var M=f("#wc_last_comment_id").val();var J=f("#wc_last_new_comment_id").val();var K=f("#wc_last_new_reply_id").val();l=f.cookie("wc_author_email");f.ajax({type:"POST",url:wc_ajax_obj.url,data:{wc_last_comment_id:M,wc_last_new_comment_id:J,wc_last_new_reply_id:K,wc_comment_list_update_type:o,wc_comments_offset:L,wc_curr_user_comment_count:I,wc_post_id:j,wc_author_email:l,action:"wc_live_update"}}).done(function(O){n(O)})}function n(I){try{var K=f.parseJSON(I);if(K.code==1){f(".wc-thread-wrapper").html(K.message);if(f(".wc_header_text_count").length){f(".wc_header_text_count").html(K.wc_all_comments_count_new)}f("#wc_last_comment_id").val(K.wc_last_comment_id)}else{if(K.code==2){if(K.wc_new_comment_count){f(".wc_new_comment_button_text").html(K.wc_new_comment_count+" "+K.wc_new_comment_button_text);f(".wc_new_comment").css("display","inline-block")}else{f(".wc_new_comment").css("display","none")}if(K.wc_new_reply_count){f(".wc_new_reply_button_text").html(K.wc_new_reply_count+" "+K.wc_new_reply_button_text);f(".wc_new_reply").css("display","inline-block")}else{f(".wc_new_reply").css("display","none")}}}s()}catch(J){console.log(J)}}function u(K){var J=f(".wc_secondary_form input.wc_field_input").is(":focus");var I=f(".wc_secondary_form textarea.wc_field_input").is(":focus");var M=false;var L=false;if(K){f(".wc_secondary_form input.wc_field_input").each(function(){if(f(this).val()!=""){M=true}})}else{f(".wc_secondary_form input.wc_field_captcha").each(function(){if(f(this).val()!=""){M=true}})}f(".wc_secondary_form textarea.wc_field_input").each(function(){if(f(this).val()!=""){L=true}});return J||I||M||L}if(o!=0){setInterval(q,e*1000)}function s(){if(f.cookie("wc_author_name")&&f.cookie("wc_author_email")){f(".wc_name").val(f.cookie("wc_author_name"));f(".wc_email").val(f.cookie("wc_author_email"))}}function b(J,L,I,K){f.ajax({type:"POST",url:wc_ajax_obj.url,data:{wc_post_id:J,wc_comment_id:L,wc_notifcattion_type:K,wc_email:I,action:"wc_check_notification_type"}})}f(document).delegate(".wc_editable_comment","click",function(){var J=a(f(this));var I=F(J);f.ajax({type:"POST",url:wc_ajax_obj.url,data:{comment_id:I,action:"wc_get_editable_comment_content"}}).done(function(L){try{var O=f.parseJSON(L);if(O.code==1){H=O.message;var K='<textarea required="required" name="wc_comment" class="wc_comment wc_field_input wc_edit_comment" id="wc_edit_comment-'+J+'" style="min-height: 2em;">'+O.message+"</textarea>";f("#wc-comm-"+J+" > .wc-comment-right .wc-comment-text").replaceWith(K);document.getElementById("wc_edit_comment-"+J).focus();f("#wc_save_edited_comment-"+J).show();K="";f("#wc_editable_comment-"+J).hide();f("#wc_cancel_edit-"+J).show()}else{var M="<a href='#close' title='Close' class='close'>&nbsp;</a>";f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");f("#wc_openModalFormAction .close").css("display","block");f("#wc_openModalFormAction > #wc_response_info").html(M+O.phrase_message)}}catch(N){console.log(N)}})});f(document).delegate(".wc_save_edited_comment","click",function(){var N=a(f(this));var J=F(N);var I=f("#wc-comm-"+N+" textarea#wc_edit_comment-"+N);var K=I.val();var L=true;var M=x(f(this).parents(".wc-comment"))-1;if(f.trim(K).length<=0){L=false}if(L){f("#wc_openModalFormAction .close").css("display","none");f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");f("#wc_openModalFormAction > #wc_response_info").html(d);f.ajax({type:"POST",url:wc_ajax_obj.url,data:{comment_id:J,comment_content:K,comment_depth:M,action:"wc_save_edited_comment"}}).done(function(O){try{var R=f.parseJSON(O);if(R.code==1){f("#wc_openModalFormAction").css("opacity","0");f("#wc_openModalFormAction").css("pointer-events","none");A(N,R.message)}else{var P="<a href='#close' title='Close' class='close'>&nbsp;</a>";f("#wc_openModalFormAction").css("opacity","1");f("#wc_openModalFormAction").css("pointer-events","auto");f("#wc_openModalFormAction .close").css("display","block");f("#wc_openModalFormAction > #wc_response_info").html(P+R.phrase_message)}I="";K=""}catch(Q){console.log(Q)}})}});f(document).delegate(".wc_cancel_edit","click",function(){var I=a(f(this));A(I,H)});function A(K,J){f("#wc_editable_comment-"+K).show();f("#wc_cancel_edit-"+K).hide();f("#wc_save_edited_comment-"+K).hide();var I='<div class="wc-comment-text">'+w(J)+"</div>";f("#wc-comm-"+K+" #wc_edit_comment-"+K).replaceWith(I)}function w(L,K){var J=(K||typeof K==="undefined")?"<br/>":"<br>";var I=(L+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+J+"$2");return I.replace("<br><br>","<br/>")}f(".wc_tooltipster").tooltipster({offsetY:2})});